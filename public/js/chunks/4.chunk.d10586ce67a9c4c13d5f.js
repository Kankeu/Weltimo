webpackJsonp([4],{"4fFt":function(t,o,e){(t.exports=e("FZ+f")(void 0)).push([t.i,".btnSubs{bottom:50px!important;position:absolute!important;right:0!important}.cover{display:none;margin:auto -15px!important}.parallax__content:hover .cover{display:inherit!important;background-color:rgba(0,0,0,.4)}",""])},"5xjp":function(t,o){t.exports={render:function(){var t=this.$createElement,o=this._self._c||t;return this.profile?o("v-container",{staticStyle:{overflow:"visible"},attrs:{"grid-list-md":"","text-xs-center":"",fluid:""}},[o("ps-header"),this._v(" "),o("router-view")],1):this._e()},staticRenderFns:[]}},"72fE":function(t,o,e){(t.exports=e("FZ+f")(void 0)).push([t.i,".layout_block{margin-top:50px!important}",""])},A57e:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var r=e("PW3M"),i=e.n(r);o.default={components:{psHeader:i.a},data:function(){return{loadingSubs:!1}},computed:{user:function(){return this.$store.state.user.user},query:function(){var t=this;return this.$store.state.query.queries.find(function(o){return"profile"===o.name&&o.id===t.$route.params.id})},profile:function(){var t=this;return this.$store.state.users.users.find(function(o){return o.id===parseInt(t.$route.params.id)})}},methods:{load:function(){var t=this;this.query||(this.$store.dispatch("setting/setLoading",!0),this.$http.get("/user/"+this.$route.params.id).then(function(o){o.body instanceof Object&&t.$store.dispatch("users/save",o.body),t.$store.dispatch("setting/setLoading",!1)}))}},mounted:function(){console.log(this),this.load()},watch:{$route:function(){this.load()}}}},"B/Ty":function(t,o,e){var r=e("4fFt");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);e("rjj0")("5190c8b7",r,!0)},DQz0:function(t,o,e){(t.exports=e("FZ+f")(void 0)).push([t.i,"#cardMore[data-v-8578f11e]{position:relative;z-index:1}.nbr-photos[data-v-8578f11e]{position:absolute;width:100%;height:100%;display:none;border-radius:50%!important;background-color:rgba(0,0,0,.4);text-align:center;padding-top:35%;color:#fff;border-radius:4px;font-size:18px}.nbr-photos[data-v-8578f11e]:hover,div:hover>.nbr-photos[data-v-8578f11e]{display:block}",""])},FSKS:function(t,o,e){var r=e("72fE");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);e("rjj0")("d5ec4a20",r,!0)},"LQ+t":function(t,o){t.exports={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{attrs:{id:"cardMore"}},[e("v-parallax",{staticStyle:{overflow:"visible"},attrs:{src:t.urls.cover?t.urls.cover:t.profile.cover,jumbotron:"",height:"300"}},[t.user.id===t.profile.id?e("v-layout",{staticClass:"cover",attrs:{column:"","align-center":"","justify-center":""}},[t.urls.cover?e("div",[e("v-btn",{attrs:{round:"",color:"danger"},on:{click:function(o){t.clear("cover")}}},[t._v("Cancel")]),t._v(" "),e("v-btn",{attrs:{round:"",color:"success"},on:{click:function(o){t.send("cover")}}},[t._v("Save")])],1):e("v-btn",{attrs:{round:"",color:"primary"},on:{click:function(o){t.select("cover")}}},[e("v-icon",[t._v("insert_photo")]),t._v(" Cover picture")],1)],1):t._e(),t._v(" "),e("v-tooltip",{staticClass:"btnSubs",attrs:{top:""}},[t.user.id!==t.profile.id?e("v-btn",{attrs:{slot:"activator",loading:t.loadingSubs,color:t.profile.followed?null:"primary",rounded:""},nativeOn:{click:function(o){t.follow(o)}},slot:"activator"},[t.profile.followed?t._e():e("v-icon",[t._v("person_add")]),t._v(t._s(t.profile.followed?"Unfollow":"Follow")+"\n            ")],1):t._e(),t._v(" "),t.profile.followed?e("span",[t._v("Click here to unfollow")]):e("span",[t._v("Click here to follow")])],1)],1),t._v(" "),e("v-card",{staticStyle:{height:"55px"}},[e("v-bottom-nav",{staticStyle:{"justify-content":"flex-end"},attrs:{absolute:"",value:!0,color:"transparent"}},[e("v-btn",{attrs:{color:"teal",flat:"",to:"/user/profile/"+t.profile.id+"/",exact:""}},[e("span",[t._v("Home")]),t._v(" "),e("v-icon")],1),t._v(" "),e("v-btn",{attrs:{color:"teal",flat:"",to:"/user/profile/"+t.profile.id+"/following"}},[e("span",[t._v("Following"),e("br"),t._v("\n                "+t._s(t.profile.following_count)+"\n                ")]),t._v(" "),e("v-icon")],1),t._v(" "),e("v-btn",{attrs:{color:"teal",flat:"",to:"/user/profile/"+t.profile.id+"/followers"}},[e("span",[t._v("Followers"),e("br"),t._v("\n                "+t._s(t.profile.followers_count)+"\n                ")])]),t._v(" "),e("v-btn",{attrs:{color:"teal",flat:"",to:"/user/profile/"+t.profile.id+"/albums"}},[e("span",[t._v("Albums")])])],1)],1),t._v(" "),e("v-avatar",{staticClass:"elevation-4",staticStyle:{position:"absolute",top:"200px",left:"10px","z-index":"4"},attrs:{slot:"activator",size:"200px"},slot:"activator"},[t.profile.id===t.user.id?e("div",{staticClass:"nbr-photos"},[t.urls.avatar?e("div",[e("v-btn",{attrs:{round:"",color:"danger"},on:{click:function(o){t.clear("avatar")}}},[t._v("Cancel")]),t._v(" "),e("v-btn",{attrs:{round:"",color:"success"},on:{click:function(o){t.send("avatar")}}},[t._v("Save")])],1):e("v-btn",{attrs:{round:"",color:"primary"},on:{click:function(o){t.select("avatar")}}},[e("v-icon",[t._v("insert_photo")]),t._v(" Profile picture")],1)],1):t._e(),t._v(" "),e("img",{attrs:{src:t.urls.avatar?t.urls.avatar:t.profile.avatar,alt:"avatar"}})]),t._v(" "),e("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"cover"},on:{change:t.preview}}),t._v(" "),e("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"avatar"},on:{change:t.preview}})],1)},staticRenderFns:[]}},PW3M:function(t,o,e){var r=e("VU/8")(e("dVkx"),e("LQ+t"),!1,function(t){e("B/Ty"),e("yJo3")},"data-v-8578f11e",null);t.exports=r.exports},dVkx:function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default={data:function(){return{loadingSubs:!1,urls:{avatar:null,cover:null},files:{avatar:null,cover:null},name:null}},computed:{user:function(){return this.$store.state.user.user},profile:function(){var t=this;return this.$store.state.users.users.find(function(o){return o.id===parseInt(t.$route.params.id)})}},methods:{follow:function(){var t=this;this.loadingSubs=!0;var o=this.profile;this.profile.followed?this.$http.delete("user/subscription/"+this.profile.followed.id).then(function(e){1===e.body.status&&(t.loadingSubs=!1,t.$set(o,"followed",null),console.log(o))}):this.$http.post("user/subscription",{receiver_id:this.profile.id}).then(function(e){e.body.id&&(t.$set(o,"followed",e.body),t.loadingSubs=!1,console.log(o))})},preview:function(t){this.files[this.name]=t.target.files[0],this.urls[this.name]=window.URL.createObjectURL(t.target.files[0])},select:function(t){this.name=t,this.$el.querySelector("#"+t).click()},clear:function(t){this.files[t]=null,this.urls[t]=null,this.$el.querySelector("#"+t).value=null},send:function(t){var o=this;this.$store.dispatch("setting/setLoading",!0);var e=new FormData;e.append(t,this.files[t]),this.$http.post("user/"+t,e).then(function(e){if(1===e.body.status){var r={};r[t]=o.urls[t],o.$store.dispatch("user/update",r),o.$store.dispatch("users/update",o.user)}o.$store.dispatch("setting/setLoading",!1),o.clear(t)})}}}},tAV2:function(t,o,e){var r=e("VU/8")(e("A57e"),e("5xjp"),!1,function(t){e("FSKS")},null,null);t.exports=r.exports},yJo3:function(t,o,e){var r=e("DQz0");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);e("rjj0")("6b89e151",r,!0)}});